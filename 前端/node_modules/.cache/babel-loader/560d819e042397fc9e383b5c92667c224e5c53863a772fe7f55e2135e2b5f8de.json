{"ast":null,"code":"import _regenerator from \"D:/Desktop/\\u9879\\u76EE/\\u4E2A\\u4EBA\\u535A\\u5BA2\\u7CFB\\u7EDF/\\u524D\\u7AEF/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"D:/Desktop/\\u9879\\u76EE/\\u4E2A\\u4EBA\\u535A\\u5BA2\\u7CFB\\u7EDF/\\u524D\\u7AEF/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport echarts from 'echarts'; // 直接导入echarts\n\nexport default {\n  name: 'Statistics',\n  data: function data() {\n    return {\n      stats: {\n        total: 0,\n        monthly: 0,\n        today: 0\n      },\n      chart: null,\n      chartData: []\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n    return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return _this.fetchStatistics();\n          case 1:\n            _context.n = 2;\n            return _this.fetchTrend();\n          case 2:\n            _this.$nextTick(function () {\n              _this.initChart();\n            });\n            window.addEventListener('resize', _this.resizeChart);\n          case 3:\n            return _context.a(2);\n        }\n      }, _callee);\n    }))();\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.chart) {\n      this.chart.dispose();\n    }\n    window.removeEventListener('resize', this.resizeChart);\n  },\n  methods: {\n    fetchStatistics: function fetchStatistics() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var _yield$_this2$$http$g, data, _t;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.p = 0;\n              _context2.n = 1;\n              return _this2.$http.get('/api/statistics/blog');\n            case 1:\n              _yield$_this2$$http$g = _context2.v;\n              data = _yield$_this2$$http$g.data;\n              _this2.stats = data;\n              _context2.n = 3;\n              break;\n            case 2:\n              _context2.p = 2;\n              _t = _context2.v;\n              console.error('获取统计数据失败:', _t);\n              _this2.$message.error('获取统计数据失败');\n            case 3:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[0, 2]]);\n      }))();\n    },\n    fetchTrend: function fetchTrend() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        var _yield$_this3$$http$g, data, _t2;\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.p = 0;\n              _context3.n = 1;\n              return _this3.$http.get('/api/statistics/trend');\n            case 1:\n              _yield$_this3$$http$g = _context3.v;\n              data = _yield$_this3$$http$g.data;\n              _this3.chartData = data;\n              if (_this3.chart) {\n                _this3.setChartOption();\n              }\n              _context3.n = 3;\n              break;\n            case 2:\n              _context3.p = 2;\n              _t2 = _context3.v;\n              console.error('获取趋势数据失败:', _t2);\n              _this3.$message.error('获取趋势数据失败');\n            case 3:\n              return _context3.a(2);\n          }\n        }, _callee3, null, [[0, 2]]);\n      }))();\n    },\n    initChart: function initChart() {\n      if (!this.chart && this.$refs.trendChart) {\n        this.chart = echarts.init(this.$refs.trendChart);\n        this.setChartOption();\n      }\n    },\n    setChartOption: function setChartOption() {\n      if (!this.chart || !this.chartData.length) return;\n      var option = {\n        title: {\n          text: '近30天博客发布趋势'\n        },\n        tooltip: {\n          trigger: 'axis'\n        },\n        xAxis: {\n          type: 'category',\n          data: this.chartData.map(function (item) {\n            return item.date;\n          }),\n          axisLabel: {\n            rotate: 45\n          }\n        },\n        yAxis: {\n          type: 'value',\n          minInterval: 1\n        },\n        series: [{\n          name: '发布数量',\n          data: this.chartData.map(function (item) {\n            return item.count;\n          }),\n          type: 'line',\n          smooth: true,\n          areaStyle: {\n            opacity: 0.3\n          },\n          itemStyle: {\n            color: '#409EFF'\n          }\n        }]\n      };\n      this.chart.setOption(option);\n    },\n    resizeChart: function resizeChart() {\n      if (this.chart) {\n        this.chart.resize();\n      }\n    }\n  }\n};","map":{"version":3,"names":["echarts","name","data","stats","total","monthly","today","chart","chartData","mounted","_this","_asyncToGenerator","_regenerator","m","_callee","w","_context","n","fetchStatistics","fetchTrend","$nextTick","initChart","window","addEventListener","resizeChart","a","beforeDestroy","dispose","removeEventListener","methods","_this2","_callee2","_yield$_this2$$http$g","_t","_context2","p","$http","get","v","console","error","$message","_this3","_callee3","_yield$_this3$$http$g","_t2","_context3","setChartOption","$refs","trendChart","init","length","option","title","text","tooltip","trigger","xAxis","type","map","item","date","axisLabel","rotate","yAxis","minInterval","series","count","smooth","areaStyle","opacity","itemStyle","color","setOption","resize"],"sources":["src/views/Statistics.vue"],"sourcesContent":["<template>\r\n  <div class=\"statistics\">\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"8\">\r\n        <el-card>\r\n          <div slot=\"header\">博客总数</div>\r\n          <div class=\"data-box\">{{ stats.total || 0 }}</div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card>\r\n          <div slot=\"header\">本月发布</div>\r\n          <div class=\"data-box\">{{ stats.monthly || 0 }}</div>\r\n        </el-card>\r\n      </el-col>\r\n      <el-col :span=\"8\">\r\n        <el-card>\r\n          <div slot=\"header\">今日发布</div>\r\n          <div class=\"data-box\">{{ stats.today || 0 }}</div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    \r\n    <el-card class=\"chart-card\">\r\n      <div slot=\"header\">博客发布趋势</div>\r\n      <div ref=\"trendChart\" style=\"height: 400px\"></div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport echarts from 'echarts'  // 直接导入echarts\r\n\r\nexport default {\r\n  name: 'Statistics',\r\n  data() {\r\n    return {\r\n      stats: {\r\n        total: 0,\r\n        monthly: 0,\r\n        today: 0\r\n      },\r\n      chart: null,\r\n      chartData: []\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.fetchStatistics()\r\n    await this.fetchTrend()\r\n    this.$nextTick(() => {\r\n      this.initChart()\r\n    })\r\n    window.addEventListener('resize', this.resizeChart)\r\n  },\r\n  beforeDestroy() {\r\n    if (this.chart) {\r\n      this.chart.dispose()\r\n    }\r\n    window.removeEventListener('resize', this.resizeChart)\r\n  },\r\n  methods: {\r\n    async fetchStatistics() {\r\n      try {\r\n        const { data } = await this.$http.get('/api/statistics/blog')\r\n        this.stats = data\r\n      } catch (error) {\r\n        console.error('获取统计数据失败:', error)\r\n        this.$message.error('获取统计数据失败')\r\n      }\r\n    },\r\n    async fetchTrend() {\r\n      try {\r\n        const { data } = await this.$http.get('/api/statistics/trend')\r\n        this.chartData = data\r\n        if (this.chart) {\r\n          this.setChartOption()\r\n        }\r\n      } catch (error) {\r\n        console.error('获取趋势数据失败:', error)\r\n        this.$message.error('获取趋势数据失败')\r\n      }\r\n    },\r\n    initChart() {\r\n      if (!this.chart && this.$refs.trendChart) {\r\n        this.chart = echarts.init(this.$refs.trendChart)\r\n        this.setChartOption()\r\n      }\r\n    },\r\n    setChartOption() {\r\n      if (!this.chart || !this.chartData.length) return\r\n      \r\n      const option = {\r\n        title: {\r\n          text: '近30天博客发布趋势'\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis'\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: this.chartData.map(item => item.date),\r\n          axisLabel: {\r\n            rotate: 45\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          minInterval: 1\r\n        },\r\n        series: [{\r\n          name: '发布数量',\r\n          data: this.chartData.map(item => item.count),\r\n          type: 'line',\r\n          smooth: true,\r\n          areaStyle: {\r\n            opacity: 0.3\r\n          },\r\n          itemStyle: {\r\n            color: '#409EFF'\r\n          }\r\n        }]\r\n      }\r\n      this.chart.setOption(option)\r\n    },\r\n    resizeChart() {\r\n      if (this.chart) {\r\n        this.chart.resize()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.statistics {\r\n  padding: 20px;\r\n}\r\n.data-box {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n  color: #409EFF;\r\n  padding: 20px 0;\r\n}\r\n.chart-card {\r\n  margin-top: 20px;\r\n}\r\n.el-card {\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}